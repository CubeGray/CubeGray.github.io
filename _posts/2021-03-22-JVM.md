---
title: "JVM이란?"
date: 2021-03-22 00:00:28 -0400
draft: false
description: "[JAVA]Java Virtual Machine"
categories: [JAVA]
toc : true
toc_sticky : true
toc_label : 목차
---

### Java Virtual Machine

## What is JVM?

JVM의 역할 : Java Application을 클래스 로더를 통해 읽어들여 JAVA API와 함께 실행함. JAVA와 OS사이에서 중개자 역할을 수행하여 JAVA가 운영체제에 종속되지 않도록 한다. 

가장 중요한 역할은 메모리관리, Garbage collection을 수행한다. 
스택 기반으로 동작한다.

## JAVA 프로그램의 실행과정

1. 프로그램이 실행되면 JVM은 OS로부터 프로그램이 필요로 하는 메모리를 할당받음.
2. 자바 컴파일러(javac)가 자바 소스코드(.java)를 읽어들여 자바 바이트코드(.class)로 변환시킨다.
3. Class Loader를 통해 class파일들을 JVM으로 로딩.
4. 로딩된 class파일들은 Execution engine을 통해 해석됨.
5. 해석된 byte code는 runtime data areas에 배치되어 실질적인 수행이 이루어짐.

이러한 실행과정에서 JVM은 Thread Synchronization과 GC같은 관리작업을 수행한다.

<img src="https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F25616D45576B854C3F">

## JVM구성

# Class Loader

JVM내로 클래스(.class file)을 로드하고, 링크를 통해 배치하는 작업 수행하는 모듈. Runtime시에 동적으로 클래스를 로드함. 자바는 클래스를 처음으로 참조할 때(런타임 시에) 클래스를 로드하고 링크하는데 그 역할을 클래스 로더가 수행함.

# Execution Engine

클래스를 실행시키는 역할. 클래스 로더가 JVM내의 런타임 데이터 영역에 바이트 코드를 배치시키고 실행엔진에 의해 실행됨. 바이트 코드를 JVM내부에서 실행할 수 있는 실행파일 형태로 변경해야 하는데 이때 Interpreter와 JIT 방식을 사용하게 됨.

**Interpreter** : 자바 바이트 코드를 명령어 단위로 읽어서 실행하는데 한줄씩 수행하기 때문에 느림.

**JIT (Just - In - Time)** : 인터프리터 방식의 단점을 보완하기 위해 도입됨. 인터프리터 방식으로 실행하다가 적절한 시점에 바이트 코드 전체를 컴파일하여 네이티브 코드로 변경하고 직접 실행. 
